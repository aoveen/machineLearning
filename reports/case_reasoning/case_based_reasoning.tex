\documentclass[10pt,a4paper]{article}
\usepackage[margin=1.4cm]{geometry}
\usepackage[latin1]{inputenc}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{multirow}
\usepackage{graphicx}
\usepackage{subcaption}
\usepackage{morefloats}

\setlength{\parskip}{5pt}
\setlength{\parindent}{0pt}

\author{Hector Dearman \and Paul Rowe-White \and Kritaphat Songsriin \and Simon Stuckemann}
\title{Machine Learning CBC: Case-Based Reasoning\\Group 2}
\begin{document}
\maketitle

\section{Case-based Reasoning}
Contrary to the previous algorithms we have implemented (decision tree learning and artificial neural networks) which belong to the class of \emph{eager learning algorithms}, instance-based learning algorithms belong to the class  of so-called \emph{lazy learning methods}. 
While \emph{eager learning algorithms} construct a general and explicit description of the target function when training examples are provided, \emph{lazy learning algorithms}, such as \emph{Case-based reasoning} simply store the training examples. Generalising beyond these examples is only done when a new instance must be classified. When a new instance should be classified, the algorithm compares the instance to the existing instances and assigns a target function value (the classification) based on the instance's relation to the already stored values.

\section{Implementation Details}
Describe implemenation of CBR cases, the retrieve, reuse and retain functions. Flowchart of how the code works.

Describe how you initialise your CBR system.

\subsection{Dealing with Existing Cases}
Discuss what happens if you try to add a case to the CBR system that is already there (either in the initialisation phase or in the retain function) How did you deal with this issue?

\subsection{Similarity Measures}
Compare the different similarity measures you have used (at least three). What are the advantages/ disadvantages of each measure?

\subsection{Dealing with Multiple Best Matches}
How did you solve the problem of finding two or more best matches with different labels in function RETRIEVE

\section{Performance Results}

Is there any difference in the CBR performance on noisy and clean data. If yes, why?

Commented results of the average confusion matrix, average classification rate and recall, precision and F1 measures per class.

Table~\ref{tab:avgClassificationRate} shows that there is a difference in performance of CBR on noisy and clean data. This difference is a 10\% - 15\% reduction in average classification rate for noisy data compared to clean data. A reason for this can be that the the noisy data contains attributes that are not relevant to solving the problem (e.g. examples that have the same set of 'core' attributes that can be used to classify it but also have different sets of other attributes that). This means these examples will be spread out when they should actually be close together, and so when a new example needs classifying the examples it should use might be far away from it. The top performing measure, Shared AUs, does not take into account what AUs are important for classification so it may indicate that two examples are similar if they share the same irrelevant AUs.

\begin{table}[!ht]
\centering
\begin{tabular}{|l|l|c|c|c|c|c|c|}
	\cline{3-8}
	\multicolumn{2}{c}{}& \multicolumn{6}{ |c| }{Predicted class}\\
	\cline{3-8}
	\multicolumn{2}{c|}{} & 1 Anger & 2 Disgust & 3 Fear & 4 Happiness & 5 Sadness & 6 Surprise\\ \cline{1-8}
	\multirow{6}{*}{Actual class}& 1 Anger & 10.1 & 1.7 & 0.4 & 0.3 & 0.5 & 0.1 \\ \cline{2-8}
	& 2 Disgust & 0.7 & 18.1 & 0.2 & 0.5 & 0.2 & 0.1\\ \cline{2-8}
	& 3 Fear & 0.4 & 0.3 & 8.7 & 0.2 & 0.0 & 2.2 \\ \cline{2-8}
	& 4 Happiness & 0 & 0.6 & 0 & 20.9 & 0 & 0 \\ \cline{2-8}
	& 5 Sadness & 0.5 & 2.3 & 0.1 & 0.5 & 9.5 & 0.3 \\ \cline{2-8}
	& 6 Surprise & 0 & 0.1 & 0.5 & 0.3 & 0 & 19.7\\ \hline
\end{tabular}
\caption{Average Confusion Matrix - Shared AUs - Clean Data}
\label{tab:sharedAUsCleanConfusion}
\end{table}

\begin{table}[!ht]
\centering
\begin{tabular}{|l|l|c|c|c|c|c|c|}
	\cline{3-8}
	\multicolumn{2}{c}{}& \multicolumn{6}{ |c| }{Predicted class}\\
	\cline{3-8}
	\multicolumn{2}{c|}{} & 1 Anger & 2 Disgust & 3 Fear & 4 Happiness & 5 Sadness & 6 Surprise\\ \cline{1-8}
	\multirow{6}{*}{Actual class}& 1 Anger & 4 & 1.1 & 2 & 0.4 & 0.8 & 0.5 \\ \cline{2-8}
	& 2 Disgust & 0.4 & 16.7 & 1 & 0.3 & 0.2 & 0.1\\ \cline{2-8}
	& 3 Fear & 0.8 & 1.6 & 12.9 & 1.1 & 0.3 & 2\\ \cline{2-8}
	& 4 Happiness & 0.4 & 0.8 & 1.1 & 17.7 & 0.2 & 0.6 \\ \cline{2-8}
	& 5 Sadness & 2.9 & 0.8 & 1.3 & 0.3 & 5.2 & 0.5 \\ \cline{2-8}
	& 6 Surprise & 0.3 & 0.2 & 1.2 & 0.6 & 0.7 & 19\\ \hline
\end{tabular}
\caption{Average Confusion Matrix - Shared AUs - Noisy Data}
\label{tab:sharedAUsNoisyConfusion}
\end{table}

\begin{table}[!ht]
\centering
\begin{tabular}{|l|l|c|c|c|c|c|c|}
	\cline{3-8}
	\multicolumn{2}{c}{}& \multicolumn{6}{ |c| }{Predicted class}\\
	\cline{3-8}
	\multicolumn{2}{c|}{} & 1 Anger & 2 Disgust & 3 Fear & 4 Happiness & 5 Sadness & 6 Surprise\\ \cline{1-8}
	\multirow{6}{*}{Actual class}& 1 Anger & 10.2 & 1.6 & 0.4 & 0.2 & 0.6 & 0.1 \\ \cline{2-8}
	& 2 Disgust & 1.1 & 17.6 & 0 & 0.4 & 0.6 & 0.1\\ \cline{2-8}
	& 3 Fear & 0.3 & 0.2 & 9.8 & 0.4 & 0.3 & 0.8 \\ \cline{2-8}
	& 4 Happiness & 0 & 0.3 & 0.1 & 20.9 & 0 & 0.2 \\ \cline{2-8}
	& 5 Sadness & 0.7 & 2.3 & 0.2 & 0.5 & 9.3 & 0.2 \\ \cline{2-8}
	& 6 Surprise & 0 & 0.1 & 0.7 & 0.5 & 0 & 19.3\\ \hline
\end{tabular}
\caption{Average Confusion Matrix - Weighted - Clean Data}
\label{tab:weightedCleanConfusion}
\end{table}

\begin{table}[!ht]
\centering
\begin{tabular}{|l|l|c|c|c|c|c|c|}
	\cline{3-8}
	\multicolumn{2}{c}{}& \multicolumn{6}{ |c| }{Predicted class}\\
	\cline{3-8}
	\multicolumn{2}{c|}{} & 1 Anger & 2 Disgust & 3 Fear & 4 Happiness & 5 Sadness & 6 Surprise\\ \cline{1-8}
	\multirow{6}{*}{Actual class}& 1 Anger & 3.3 & 1.8 & 1.8 & 0.5 & 1.1 & 0.3 \\ \cline{2-8}
	& 2 Disgust & 1.5 & 14.7 & 1.3 & 0.5 & 0.5 & 0.2\\ \cline{2-8}
	& 3 Fear & 1 & 1 & 13 & 0.7 & 0.8 & 2.2 \\ \cline{2-8}
	& 4 Happiness & 0.4 & 1 & 1 & 17.8 & 0.1 & 0.5 \\ \cline{2-8}
	& 5 Sadness & 1.4 & 1.4 & 1.8 & 0.1 & 6 & 0.3 \\ \cline{2-8}
	& 6 Surprise & 0.3 & 0.2 & 1.1 & 0.8 & 0.8 & 18.8\\ \hline
\end{tabular}
\caption{Average Confusion Matrix - Weighted - Noisy Data}
\label{tab:weightedNoisyConfusion}
\end{table}

\begin{table}[!ht]
\centering
\begin{tabular}{|l|l|c|c|c|c|c|c|}
	\cline{3-8}
	\multicolumn{2}{c}{}& \multicolumn{6}{ |c| }{Predicted class}\\
	\cline{3-8}
	\multicolumn{2}{c|}{} & 1 Anger & 2 Disgust & 3 Fear & 4 Happiness & 5 Sadness & 6 Surprise\\ \cline{1-8}
	\multirow{6}{*}{Actual class}& 1 Anger & 10.1 & 1.7 & 0.4 & 0.3 & 0.5 & 0.1 \\ \cline{2-8}
	& 2 Disgust & 0.7 & 18.1 & 0.2 & 0.5 & 0.2 & 0.1\\ \cline{2-8}
	& 3 Fear & 0.4 & 0.3 & 8.7 & 0.2 & 0 & 2.2 \\ \cline{2-8}
	& 4 Happiness & 0 & 0.6 & 0 & 20.9 & 0 & 0 \\ \cline{2-8}
	& 5 Sadness & 0.5 & 2.3 & 0.1 & 0.5 & 9.5 & 0.3 \\ \cline{2-8}
	& 6 Surprise & 0 & 0.1 & 0.5 & 0.3 & 0 & 19.7\\ \hline
\end{tabular}
\caption{Average Confusion Matrix - Matching - Clean Data}
\label{tab:matchingCleanConfusion}
\end{table}

\begin{table}[!ht]
\centering
\begin{tabular}{|l|l|c|c|c|c|c|c|}
	\cline{3-8}
	\multicolumn{2}{c}{}& \multicolumn{6}{ |c| }{Predicted class}\\
	\cline{3-8}
	\multicolumn{2}{c|}{} & 1 Anger & 2 Disgust & 3 Fear & 4 Happiness & 5 Sadness & 6 Surprise\\ \cline{1-8}
	\multirow{6}{*}{Actual class}& 1 Anger & 4 & 1.1 & 2 & 0.4 & 0.8 & 0.5 \\ \cline{2-8}
	& 2 Disgust & 0.4 & 16.7 & 1 & 0.3 & 0.2 & 0.1\\ \cline{2-8}
	& 3 Fear & 0.8 & 1.6 & 12.9 & 1.1 & 0.3 & 2 \\ \cline{2-8}
	& 4 Happiness & 0.4 & 0.8 & 1.1 & 17.7 & 0.2 & 0.6 \\ \cline{2-8}
	& 5 Sadness & 2.9 & 0.8 & 1.3 & 0.3 & 5.2 & 0.5 \\ \cline{2-8}
	& 6 Surprise & 0.3 & 0.2 & 1.2 & 0.6 & 0.7 & 19\\ \hline
\end{tabular}
\caption{Average Confusion Matrix - Matching - Noisy Data}
\label{tab:matchingNoisyConfusion}
\end{table}

\begin{table}[!ht]
\centering
\begin{tabular}{|l|l|c|c|c|c|c|c|}
	\cline{3-8}
	\multicolumn{2}{c}{}& \multicolumn{6}{ |c| }{Predicted class}\\
	\cline{3-8}
	\multicolumn{2}{c|}{} & 1 Anger & 2 Disgust & 3 Fear & 4 Happiness & 5 Sadness & 6 Surprise\\ \cline{1-8}
	\multirow{6}{*}{Actual class}& 1 Anger & 10.1 & 1.7 & 0.4 & 0.3 & 0.5 & 0.1 \\ \cline{2-8}
	& 2 Disgust & 0.7 & 18.1 & 0.2 & 0.5 & 0.2 & 0.1\\ \cline{2-8}
	& 3 Fear & 0.4 & 0.3 & 8.7 & 0.2 & 0 & 2.2 \\ \cline{2-8}
	& 4 Happiness & 0 & 0.6 & 0 & 20.9 & 0 & 0 \\ \cline{2-8}
	& 5 Sadness & 0.5 & 2.3 & 0.1 & 0.5 & 9.5 & 0.3 \\ \cline{2-8}
	& 6 Surprise & 0 & 0.1 & 0.5 & 0.3 & 0 & 19.7\\ \hline
\end{tabular}
\caption{Average Confusion Matrix - RT - Clean Data}
\label{tab:rtCleanConfusion}
\end{table}

\begin{table}[!ht]
\centering
\begin{tabular}{|l|l|c|c|c|c|c|c|}
	\cline{3-8}
	\multicolumn{2}{c}{}& \multicolumn{6}{ |c| }{Predicted class}\\
	\cline{3-8}
	\multicolumn{2}{c|}{} & 1 Anger & 2 Disgust & 3 Fear & 4 Happiness & 5 Sadness & 6 Surprise\\ \cline{1-8}
	\multirow{6}{*}{Actual class}& 1 Anger & 4 & 1.1 & 2 & 0.4 & 0.8 & 0.5 \\ \cline{2-8}
	& 2 Disgust & 0.4 & 16.7 & 1 & 0.3 & 0.2 & 0.1\\ \cline{2-8}
	& 3 Fear & 0.8 & 1.6 & 12.9 & 1.1 & 0.3 & 2 \\ \cline{2-8}
	& 4 Happiness & 0.4 & 0.8 & 1.1 & 17.7 & 0.2 & 0.6 \\ \cline{2-8}
	& 5 Sadness & 2.9 & 0.8 & 1.3 & 0.3 & 5.2 & 0.5 \\ \cline{2-8}
	& 6 Surprise & 0.3 & 0.2 & 1.2 & 0.6 & 0.7 & 19\\ \hline
\end{tabular}
\caption{Average Confusion Matrix - RT - Noisy Data}
\label{tab:rtNoisyConfusion}
\end{table}


\begin{table}[!ht]
\centering
\begin{tabular}{|l|c|c|c|c|c|c|c|}
	\cline{3-8}
	\multicolumn{2}{c}{}& \multicolumn{6}{ |c| }{Class}\\
	\cline{3-8}
	\multicolumn{2}{c|}{} & 1 Anger & 2 Disgust & 3 Fear & 4 Happiness & 5 Sadness & 6 Surprise\\ \cline{1-8}
	\multirow{2}{*}{Algorithm}& Shared AUs (Clean) & 77.0992 & 91.4141 & 73.7288 & 97.2093 & 71.9697 & 95.6311 \\ \cline{2-8}  
	& Shared AUs (Noisy) & 45.4545 & 89.3048 & 68.9840 & 85.0962 & 47.2727 & 86.3636 \\ \cline{2-8} 
		& Weighted (Clean) & 77.8626 & 88.8889 & 83.0508 & 97.2093 & 70.4545 & 93.6893\\ \cline{2-8} 
	& Weighted (Noisy) & 37.5000 & 78.6096 & 69.5187 & 85.5769 & 54.5455 & 85.4545\\ \cline{2-8}
			& Matching (Clean) & 77.0992 & 91.4141 & 73.7288 & 97.2093 & 71.9696 & 95.6310\\ \cline{2-8} 
	& Matching (Noisy) & 45.4545 & 89.3048 & 68.9840 & 85.0962 & 47.2727 & 86.3636\\ \cline{2-8}
			& RT (Clean) & 77.0992 & 91.4141 & 73.7288 & 97.2093 & 71.9697 & 95.6311\\ \cline{2-8} 
	& RT (Noisy) & 45.4545 & 89.3048 & 68.9840 & 85.0962 & 47.2727 & 86.3636\\ \hline

\end{tabular}
\caption{Precision Per Class}
\label{tab:precisionPerClass}
\end{table}

\begin{table}[!ht]
\centering
\begin{tabular}{|l|c|c|c|c|c|c|c|}
	\cline{3-8}
	\multicolumn{2}{c}{}& \multicolumn{6}{ |c| }{Class}\\
	\cline{3-8}
	\multicolumn{2}{c|}{} & 1 Anger & 2 Disgust & 3 Fear & 4 Happiness & 5 Sadness & 6 Surprise\\ \cline{1-8}
	\multirow{2}{*}{Algorithm}& Shared AUs (Clean) & 86.3248  & 78.3550 & 87.8788 & 92.0705 & 93.1373 & 87.9464 \\ \cline{2-8}  
	& Shared AUs (Noisy) & 45.4545 & 78.7736 & 66.1538 & 86.7647 & 70.2703 & 83.7004 \\ \cline{2-8} 
		& Weighted (Clean) & 82.9268 & 79.6380 & 87.5000 & 91.2663 & 86.1111 & 93.2367 \\ \cline{2-8} 
	& Weighted (Noisy) & 41.7722 & 73.1343 & 65.0000 & 87.2549 & 64.5161 & 84.3049\\ \cline{2-8}
			& Matching (Clean) & 86.3248 & 78.3550 & 87.8788 & 92.0705 & 93.1373 & 87.9464\\ \cline{2-8} 
	& Matching (Noisy) & 45.4545 & 78.7736 & 66.1538 & 86.7647 & 70.2703 & 83.7004\\ \cline{2-8}
			& RT (Clean) & 86.3248  & 78.3550 & 87.8788 & 92.0705 & 93.1373 & 87.9464\\ \cline{2-8} 
	& RT (Noisy) & 45.4545 & 78.7736 & 66.1538 & 86.7647 & 70.2703 & 83.7004\\ \hline

\end{tabular}
\caption{Recall Per Class}
\label{tab:recallPerClass}
\end{table}

\begin{table}[!ht]
\centering
\begin{tabular}{|l|c|c|c|c|c|c|c|}
	\cline{3-8}
	\multicolumn{2}{c}{}& \multicolumn{6}{ |c| }{Class}\\
	\cline{3-8}
	\multicolumn{2}{c|}{} & 1 Anger & 2 Disgust & 3 Fear & 4 Happiness & 5 Sadness & 6 Surprise\\ \cline{1-8}
	\multirow{2}{*}{Algorithm}& Shared AUs (Clean) & 81.4516  & 84.3822 & 80.1843 & 94.5701 & 81.1965 & 91.6279 \\ \cline{2-8}  
	& Shared AUs (Noisy) & 45.4545 & 83.7093 & 67.5393 & 85.922 & 56.5217 & 85.0112r\\ \cline{2-8} 
		& Weighted (Clean) & 80.3149 & 84.0095 & 85.2174 & 94.1441 & 77.5000 & 93.4624\\ \cline{2-8} 
	& Weighted (Noisy) & 39.5210 & 75.7732 & 67.1835 & 86.4078 & 59.1133 & 84.8758\\ \cline{2-8}
			& Matching (Clean) & 81.4516  & 84.3823 & 80.1843 & 94.5701 & 811966 & 91.6279\\ \cline{2-8} 
	& Matching (Noisy) & 45.4545 & 83.7093 & 67.5393 & 85.9223 & 56.5217 & 85.0112\\ \cline{2-8}
			& RT (Clean) & 81.4516 & 84.3823 & 80.1843 & 94.5701 & 81.1966 & 91.6279\\ \cline{2-8} 
	& RT (Noisy) & 45.4545 & 83.7093 & 67.5393 & 85.9223 & 56.5217 & 85.0112\\ \hline

\end{tabular}
\caption{F1 Measure Per Class}
\label{tab:f1PerClass}
\end{table}

\begin{table}[!ht]
\centering
\begin{tabular}{|l|c|c|c|}
	\cline{3-3}
	\multicolumn{2}{c|}{} & Average Classification Rate \\ \cline{1-3}
	\multirow{2}{*}{Algorithm}& Shared AUs (Clean) & 0.87  \\ \cline{2-3}  
	& Shared AUs (Noisy) & 0.7750  \\ \cline{2-3} 
		& Weighted (Clean) &  0.871\\ \cline{2-3} 
	& Weighted (Noisy) & 0.7360\\ \cline{2-3} 
			& Matching (Clean) & 0.87  \\ \cline{2-3} 
	& Matching (Noisy) & 0.7550\\ \cline{2-3} 
			& RT (Clean) & 0.87 \\ \cline{2-3} 
	& RT (Noisy) & 0.7550\\ \hline

\end{tabular}
\caption{Average Classification Rate}
\label{tab:avgClassificationRate}
\end{table}

\end{document}
